language: php
php:
  - 7.0
notifications:
  email: false
services:
  - mysql
before_install:
  - mysql -e 'CREATE DATABASE splc2017;'
  - sudo apt-get install -y httrack
  - sudo apt-get install -y webhttrack
  - composer self-update
  - composer install
  - composer update
before_deploy:
  - rm -rf .git
  - mkdir build
  - zip -r build/generacion-estatica.zip ./*

deploy:
  provider: releases
  api_key: 8fa1f3c5c939860930359f526990ac37b04ff5ef
  acl: public_read
  local_dir: build
  bucket: "egc-generacionestatica"
  skip_cleanup: true
  on:
    branch: release